{% extends "rhel-5-min-ks.cfg" %}

{% block firewall %}# MRG-M: 5672 (tcp)
# MRG Messaging Installation and Configuration Guide, 1.1.5. Firewall
# Configuration: http://red.ht/WsiJpo
#
# RHEL 5 Cluster:
#   cman: 5404, 5405 (udp), ricci: 11111 (tcp), modcluster: 16851 (tcp),
#   dlm: 21064 (tcp), rgmanager: 41966, 41967, 41968, 41969 (tcp),
#   ccsd: 50006, 50008, 50009 (tcp) and 50007 (udp)
#
# and fence_xvm[d]: 1229 (tcp), httpd: 80 (tcp)
firewall --enabled --ssh --port=5672:tcp --port=5404:udp --port=5405:udp --port=11111:tcp --port=16851:tcp --port=21064:tcp --port=41966:tcp --port=41967:tcp --port=41968:tcp --port=41969:tcp --port=50006:tcp --port=50008:tcp --port=50009:tcp --port=50007:udp --port=1229:tcp
{%- endblock %}

{% block packages_installed %}{{ super() }}
# MRG-M
@mrg-messaging
# MRG-M + Cluster
cman
openais
{% endblock %}

{% block post %}{{ super() }}
{%   include "snippets/post.configure_qpid_cluster" %}
{%- endblock %}
